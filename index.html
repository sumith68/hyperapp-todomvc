<!DOCTYPE html>
<html lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <script type="module">
      import { h, text, app } from "https://unpkg.com/hyperapp"

      const createTodo = (text) =>  ({ text, completed: false})

      const AddTodo = (state) => ({
        ...state,
        todos: state.todos.concat(createTodo(state.value)),
      })

      const NewValue = (state, event) => ({
        ...state,
        value: event.target.value,
      })

      app({
        init: { todos: [], value: "" },
        view: ({ todos, value }) =>
          h("main", {}, [
            h("input", { type: "text", oninput: NewValue, value }),
            h("button", { onclick: AddTodo }, text("Add")),
            h("ul", {style: {"list-style": "none"}},
              todos.map((todo) =>
                h("li",{}, [
                    h("label", {}, [
                        h("input", {type: "checkbox", checked: todo.completed}),
                        h("span", {}, text(todo.text))
                    ])
                ])))
              ]
          ),
        node: document.getElementById("app"),
      })
    </script>
  </head>
  <body>
    <main id="app"></main>
  </body>
</html>